## Description

This folder contains Python code to compute, for a CSV of tweets, the following emotion word usage metrics:

1. Emotion score for each tweet, computed as a mean of the emotion scores of the constituent tokens. 
2. Ratio of number of tokens present in the lexicon. 
3. Utterance Emotion Dynamics metrics applied to tweets (Tweet Emotion Dynamics)

## Requirements
This code was tested with `python3.7` (but should work well with later versions as well). The `requirements.txt` file in this folder lists the external python libraries needed to run various scripts.
## Code Organization

1. `avgEmoValues.py`: This computes metrics 1 and 2 from above for a specified emotion dimension. There are four command line arguments that need to be passed:
    - **dataPath**: Path to input CSV containing tweets. The first row must be the header, and must contain a column called `text` that contains the text of the text/document.
    -  **lexPath**: Path to the lexicon CSV, with first line being the header. The CSV should contain a column called `word` and columns for emotion dimensions that specify emotion score for that word along that dimension (see `lexicons/NRC-VAD-Lexicon.csv` for an example.)
    - **lexNames**: The names of the the emotion dimensions that you want to process. Each name should be separated by a space.
    - **savePath**: Path to the folder where the output CSV will be stored

    The output is a CSV with the following columns for each row (in addition to the original columns):
    - `numTokens`: number of tokens in the tweet.
    - `numLexTokens`: number of tokens in the tweet that are present in the lexicon
    - `lexRatio`: `numLexTokens`/`numTokens`. This is metric 2 listed above.
    - `avgLexVal`: emotion score of the tweet. This is metric 1 listed above.

    These metrics can then be aggregated at the desired level to obtain emotion word usage scores for a particular tweeter, city, country, year, etc.

    **Sample Usage**

    The `sample_data` folder contains a CSV with snippets of character dialogue from a set of three novels (Pride and Prejudice, Persuasion, The Sign of the Four). Run the following command to see the outputs generated by this script (stored in `sample_data/sample_outputs` folder):

        python avgEmoValues.py --dataPath sample_data/sample_input.csv --lexPath lexicons/NRC-VAD-Lexicon.csv --lexNames valence dominance --savePath sample_data/sample_outputs

2. `uedLib`: This folder contains code associated with the Emotion Dynamics metrics. Please see the [README file](https://github.com/Priya22/TweetDynamics/tree/master/code/uedLib) within this folder for a complete description.



